{"version":3,"file":"vtuber.routes.js","names":["_express","require","_database","_interopRequireDefault","_VTuber","_mongoose","_Cover","vtuber_routes","Router","get","req","res","connectDB","vtubers","VTuber","find","select","populate","path","model","Cover","status","json","vtid","params","isObjectIdOrHexString","message","vtuber","findById","error","console","_default","exports","default"],"sources":["../../source/routes/vtuber.routes.js"],"sourcesContent":["import { Router } from \"express\";\nimport connectDB from \"../database\";\nimport VTuber from \"../models/VTuber\";\nimport { isObjectIdOrHexString } from \"mongoose\";\nimport Cover from \"../models/Cover\";\n\nconst vtuber_routes = Router();\n\nvtuber_routes.get(\"/\", async (req, res) => {\n\tawait connectDB();\n\tconst vtubers = await VTuber.find()\n\t\t.select(\n\t\t\t\"fullname fanname quote nicknames branch unit emoji avatar youtube status gender likes dislikes age birthday zodiac height\",\n\t\t)\n\t\t.populate(\"hashtag\", \"-_id general stream fanart memes\")\n\t\t.populate(\"socialNetworks\", \"_id application accounturl\")\n\t\t.populate(\"songs\", \"_id name album releasedate compositor mixing lyrics\")\n\t\t.populate({\n\t\t\tpath: \"covers\",\n\t\t\tmodel: Cover,\n\t\t\tselect: \"_id name musicVideo illustration mix\",\n\t\t\tpopulate: { path: \"original\", select: \"-_id artist album release genre\" },\n\t\t});\n\treturn res.status(200).json(vtubers);\n});\n\nvtuber_routes.get(\"/:vtid\", async (req, res) => {\n\tconst vtid = req.params.vtid;\n\ttry {\n\t\tawait connectDB();\n\t\tif (!isObjectIdOrHexString(vtid)) {\n\t\t\treturn res.status(400).json({ message: \"Invalid VTuber ID\" });\n\t\t}\n\t\tconst vtuber = await VTuber.findById(vtid)\n\t\t\t.select(\n\t\t\t\t\"-_id fullname fanname quote nicknames branch unit emoji avatar youtube status gender likes dislikes age birthday zodiac height\",\n\t\t\t)\n\t\t\t.populate(\"hashtag\", \"-_id general stream fanart memes\")\n\t\t\t.populate(\"socialNetworks\", \"_id application accounturl\")\n\t\t\t.populate(\"songs\", \"_id name album releasedate compositor mixing lyrics\")\n\t\t\t.populate({\n\t\t\t\tpath: \"covers\",\n\t\t\t\tmodel: Cover,\n\t\t\t\tselect: \"_id name musicVideo illustration mix\",\n\t\t\t\tpopulate: { path: \"original\", select: \"-_id artist album release genre\" },\n\t\t\t});\n\t\tif (!vtuber) return res.status(404).json({ message: \"VTuber not found\" });\n\t\treturn res.status(200).json(vtuber);\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\treturn res.status(500).json({ message: \"An error occurred in the query.\" });\n\t}\n});\n\nexport default vtuber_routes;\n"],"mappings":";;;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,OAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,SAAA,GAAAJ,OAAA;AACA,IAAAK,MAAA,GAAAH,sBAAA,CAAAF,OAAA;AAEA,MAAMM,aAAa,GAAG,IAAAC,eAAM,EAAC,CAAC;AAE9BD,aAAa,CAACE,GAAG,CAAC,GAAG,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC1C,MAAM,IAAAC,iBAAS,EAAC,CAAC;EACjB,MAAMC,OAAO,GAAG,MAAMC,eAAM,CAACC,IAAI,CAAC,CAAC,CACjCC,MAAM,CACN,2HACD,CAAC,CACAC,QAAQ,CAAC,SAAS,EAAE,kCAAkC,CAAC,CACvDA,QAAQ,CAAC,gBAAgB,EAAE,4BAA4B,CAAC,CACxDA,QAAQ,CAAC,OAAO,EAAE,qDAAqD,CAAC,CACxEA,QAAQ,CAAC;IACTC,IAAI,EAAE,QAAQ;IACdC,KAAK,EAAEC,cAAK;IACZJ,MAAM,EAAE,sCAAsC;IAC9CC,QAAQ,EAAE;MAAEC,IAAI,EAAE,UAAU;MAAEF,MAAM,EAAE;IAAkC;EACzE,CAAC,CAAC;EACH,OAAOL,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACT,OAAO,CAAC;AACrC,CAAC,CAAC;AAEFN,aAAa,CAACE,GAAG,CAAC,QAAQ,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC/C,MAAMY,IAAI,GAAGb,GAAG,CAACc,MAAM,CAACD,IAAI;EAC5B,IAAI;IACH,MAAM,IAAAX,iBAAS,EAAC,CAAC;IACjB,IAAI,CAAC,IAAAa,+BAAqB,EAACF,IAAI,CAAC,EAAE;MACjC,OAAOZ,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEI,OAAO,EAAE;MAAoB,CAAC,CAAC;IAC9D;IACA,MAAMC,MAAM,GAAG,MAAMb,eAAM,CAACc,QAAQ,CAACL,IAAI,CAAC,CACxCP,MAAM,CACN,gIACD,CAAC,CACAC,QAAQ,CAAC,SAAS,EAAE,kCAAkC,CAAC,CACvDA,QAAQ,CAAC,gBAAgB,EAAE,4BAA4B,CAAC,CACxDA,QAAQ,CAAC,OAAO,EAAE,qDAAqD,CAAC,CACxEA,QAAQ,CAAC;MACTC,IAAI,EAAE,QAAQ;MACdC,KAAK,EAAEC,cAAK;MACZJ,MAAM,EAAE,sCAAsC;MAC9CC,QAAQ,EAAE;QAAEC,IAAI,EAAE,UAAU;QAAEF,MAAM,EAAE;MAAkC;IACzE,CAAC,CAAC;IACH,IAAI,CAACW,MAAM,EAAE,OAAOhB,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEI,OAAO,EAAE;IAAmB,CAAC,CAAC;IACzE,OAAOf,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACK,MAAM,CAAC;EACpC,CAAC,CAAC,OAAOE,KAAK,EAAE;IACfC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACpB,OAAOlB,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEI,OAAO,EAAE;IAAkC,CAAC,CAAC;EAC5E;AACD,CAAC,CAAC;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEY1B,aAAa","ignoreList":[]}