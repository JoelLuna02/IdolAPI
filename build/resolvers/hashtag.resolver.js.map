{"version":3,"file":"hashtag.resolver.js","names":["_database","_interopRequireDefault","require","_mongoose","_Hashtag","_VTuber","hashtag_resolver","exports","Query","hashtag","connectDB","data","Hashtag","find","getHashtag","_","ID","isValidObjectId","Error","vtuber","findById","Mutation","addHashtag","general","stream","fanart","memes","process","env","NODE_ENV","new_hashtag","save","assignHashtagToVtuber","HTID","VTID","VTuber","_id","deleteHashtag","deleted","deleteOne","deletedCount"],"sources":["../../source/resolvers/hashtag.resolver.js"],"sourcesContent":["import connectDB from \"../database\";\nimport { isValidObjectId } from \"mongoose\";\nimport Hashtag from \"../models/Hashtag\";\nimport VTuber from \"../models/VTuber\";\n\nexport const hashtag_resolver = {\n\tQuery: {\n\t\tasync hashtag() {\n\t\t\tawait connectDB();\n\t\t\tconst data = await Hashtag.find();\n\t\t\treturn data;\n\t\t},\n\t\tasync getHashtag(_, { ID }) {\n\t\t\tawait connectDB();\n\t\t\tif (!isValidObjectId(ID)) throw new Error(\"Invalid Hashtag ID\");\n\t\t\tconst vtuber = await Hashtag.findById(ID);\n\t\t\tif (!vtuber) throw new Error(\"Hashtag not found!\");\n\t\t\treturn vtuber;\n\t\t},\n\t},\n\tMutation: {\n\t\tasync addHashtag(_, { general, stream, fanart, memes }) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tconst new_hashtag = new Hashtag({ general, stream, fanart, memes });\n\t\t\tconst hashtag = await new_hashtag.save();\n\t\t\treturn hashtag;\n\t\t},\n\t\tasync assignHashtagToVtuber(_, { HTID, VTID }) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tif (!isValidObjectId(HTID) || !isValidObjectId(VTID)) {\n\t\t\t\tthrow new Error(\"Invalid VTuber or Hashtag ID\");\n\t\t\t}\n\t\t\tconst vtuber = await VTuber.findById(VTID);\n\t\t\tconst hashtag = await Hashtag.findById(HTID);\n\t\t\tif (!vtuber || !hashtag) {\n\t\t\t\tthrow new Error(\"VTuber or Hashtag not found\");\n\t\t\t}\n\t\t\tvtuber.hashtag = hashtag._id;\n\t\t\thashtag.vtuber = vtuber._id;\n\t\t\tawait vtuber.save();\n\t\t\tawait hashtag.save();\n\t\t\treturn vtuber;\n\t\t},\n\t\tasync deleteHashtag(_, { ID }) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tif (!isValidObjectId(ID)) throw new Error(\"Invalid Hashtag ID\");\n\t\t\tconst deleted = (await Hashtag.deleteOne({ _id: ID })).deletedCount;\n\t\t\treturn deleted;\n\t\t},\n\t},\n};\n"],"mappings":";;;;;;;AAAA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEO,MAAMI,gBAAgB,GAAAC,OAAA,CAAAD,gBAAA,GAAG;EAC/BE,KAAK,EAAE;IACN,MAAMC,OAAOA,CAAA,EAAG;MACf,MAAM,IAAAC,iBAAS,EAAC,CAAC;MACjB,MAAMC,IAAI,GAAG,MAAMC,gBAAO,CAACC,IAAI,CAAC,CAAC;MACjC,OAAOF,IAAI;IACZ,CAAC;IACD,MAAMG,UAAUA,CAACC,CAAC,EAAE;MAAEC;IAAG,CAAC,EAAE;MAC3B,MAAM,IAAAN,iBAAS,EAAC,CAAC;MACjB,IAAI,CAAC,IAAAO,yBAAe,EAACD,EAAE,CAAC,EAAE,MAAM,IAAIE,KAAK,CAAC,oBAAoB,CAAC;MAC/D,MAAMC,MAAM,GAAG,MAAMP,gBAAO,CAACQ,QAAQ,CAACJ,EAAE,CAAC;MACzC,IAAI,CAACG,MAAM,EAAE,MAAM,IAAID,KAAK,CAAC,oBAAoB,CAAC;MAClD,OAAOC,MAAM;IACd;EACD,CAAC;EACDE,QAAQ,EAAE;IACT,MAAMC,UAAUA,CAACP,CAAC,EAAE;MAAEQ,OAAO;MAAEC,MAAM;MAAEC,MAAM;MAAEC;IAAM,CAAC,EAAE;MACvD,MAAM,IAAAhB,iBAAS,EAAC,CAAC;MACjB,IAAIiB,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;QAC1C,MAAM,IAAIX,KAAK,CAAC,yDAAyD,CAAC;MAC3E;MACA,MAAMY,WAAW,GAAG,IAAIlB,gBAAO,CAAC;QAAEW,OAAO;QAAEC,MAAM;QAAEC,MAAM;QAAEC;MAAM,CAAC,CAAC;MACnE,MAAMjB,OAAO,GAAG,MAAMqB,WAAW,CAACC,IAAI,CAAC,CAAC;MACxC,OAAOtB,OAAO;IACf,CAAC;IACD,MAAMuB,qBAAqBA,CAACjB,CAAC,EAAE;MAAEkB,IAAI;MAAEC;IAAK,CAAC,EAAE;MAC9C,MAAM,IAAAxB,iBAAS,EAAC,CAAC;MACjB,IAAIiB,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;QAC1C,MAAM,IAAIX,KAAK,CAAC,yDAAyD,CAAC;MAC3E;MACA,IAAI,CAAC,IAAAD,yBAAe,EAACgB,IAAI,CAAC,IAAI,CAAC,IAAAhB,yBAAe,EAACiB,IAAI,CAAC,EAAE;QACrD,MAAM,IAAIhB,KAAK,CAAC,8BAA8B,CAAC;MAChD;MACA,MAAMC,MAAM,GAAG,MAAMgB,eAAM,CAACf,QAAQ,CAACc,IAAI,CAAC;MAC1C,MAAMzB,OAAO,GAAG,MAAMG,gBAAO,CAACQ,QAAQ,CAACa,IAAI,CAAC;MAC5C,IAAI,CAACd,MAAM,IAAI,CAACV,OAAO,EAAE;QACxB,MAAM,IAAIS,KAAK,CAAC,6BAA6B,CAAC;MAC/C;MACAC,MAAM,CAACV,OAAO,GAAGA,OAAO,CAAC2B,GAAG;MAC5B3B,OAAO,CAACU,MAAM,GAAGA,MAAM,CAACiB,GAAG;MAC3B,MAAMjB,MAAM,CAACY,IAAI,CAAC,CAAC;MACnB,MAAMtB,OAAO,CAACsB,IAAI,CAAC,CAAC;MACpB,OAAOZ,MAAM;IACd,CAAC;IACD,MAAMkB,aAAaA,CAACtB,CAAC,EAAE;MAAEC;IAAG,CAAC,EAAE;MAC9B,MAAM,IAAAN,iBAAS,EAAC,CAAC;MACjB,IAAIiB,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;QAC1C,MAAM,IAAIX,KAAK,CAAC,yDAAyD,CAAC;MAC3E;MACA,IAAI,CAAC,IAAAD,yBAAe,EAACD,EAAE,CAAC,EAAE,MAAM,IAAIE,KAAK,CAAC,oBAAoB,CAAC;MAC/D,MAAMoB,OAAO,GAAG,CAAC,MAAM1B,gBAAO,CAAC2B,SAAS,CAAC;QAAEH,GAAG,EAAEpB;MAAG,CAAC,CAAC,EAAEwB,YAAY;MACnE,OAAOF,OAAO;IACf;EACD;AACD,CAAC","ignoreList":[]}