{"version":3,"file":"social.resolver.js","names":["_database","_interopRequireDefault","require","_SocialNetwork","_VTuber","_mongoose","social_resolver","exports","Query","socials","connectDB","data","SocialNetWork","find","getSocial","_","ID","isValidObjectId","Error","findById","Mutation","addSocialNetwork","application","accounturl","process","env","NODE_ENV","new_social","save","assignSocialNetworkToVtuber","SNID","VTID","vtuber","VTuber","social","socialNetworks","push","_id","deleteSocialNetwork","deleted","deleteOne","deletedCount"],"sources":["../../source/resolvers/social.resolver.js"],"sourcesContent":["import connectDB from \"../database\";\nimport SocialNetWork from \"../models/SocialNetwork\";\nimport VTuber from \"../models/VTuber\";\nimport { isValidObjectId } from \"mongoose\";\n\nexport const social_resolver = {\n\tQuery: {\n\t\tasync socials() {\n\t\t\tawait connectDB();\n\t\t\tconst data = await SocialNetWork.find();\n\t\t\treturn data;\n\t\t},\n\t\tasync getSocial(_, { ID }) {\n\t\t\tawait connectDB();\n\t\t\tif (!isValidObjectId(ID)) throw new Error(\"Invalid Social Network ID\");\n\t\t\tconst data = await SocialNetWork.findById(ID);\n\t\t\tif (!data) throw new Error(\"Social network not found!\");\n\t\t\treturn data;\n\t\t},\n\t},\n\tMutation: {\n\t\tasync addSocialNetwork(_, { application, accounturl }) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tconst new_social = new SocialNetWork({ application, accounturl });\n\t\t\tconst data = await new_social.save();\n\t\t\treturn data;\n\t\t},\n\t\tasync assignSocialNetworkToVtuber(_, { SNID, VTID }) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tif (!isValidObjectId(SNID) || !isValidObjectId(VTID)) {\n\t\t\t\tthrow new Error(\"Invalid Social Network or VTuber ID\");\n\t\t\t}\n\t\t\tconst vtuber = await VTuber.findById(VTID);\n\t\t\tconst social = await SocialNetWork.findById(SNID);\n\t\t\tif (!vtuber || !social) {\n\t\t\t\tthrow new Error(\"VTuber or Social Network not found\");\n\t\t\t}\n\t\t\tvtuber.socialNetworks.push(social._id);\n\t\t\tsocial.vtuber = vtuber._id;\n\t\t\tawait vtuber.save();\n\t\t\tawait social.save();\n\t\t\treturn vtuber;\n\t\t},\n\t\tasync deleteSocialNetwork(_, { ID }) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tif (!isValidObjectId(ID)) throw new Error(\"Invalid Social Network ID\");\n\t\t\tconst deleted = (await SocialNetWork.deleteOne({ _id: ID })).deletedCount;\n\t\t\tif (!deleted) throw new Error(\"Social network not found!\");\n\t\t\treturn deleted;\n\t\t},\n\t},\n};\n"],"mappings":"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","ignoreList":[]}