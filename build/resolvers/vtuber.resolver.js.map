{"version":3,"file":"vtuber.resolver.js","names":["_mongoose","require","_database","_interopRequireDefault","_VTuber","_Hashtag","_Cover","vtuber_resolver","exports","Query","vtuber","connectDB","data","VTuber","find","populate","path","model","Cover","select","getVtuber","_","ID","isValidObjectId","Error","findById","Mutation","addVtuber","fullname","fanname","quote","branch","unit","emoji","nicknames","youtube","status","avatar","gender","likes","dislikes","age","birthday","zodiac","height","process","env","NODE_ENV","new_vtuber","save","deleteVtuber","Hashtag","findOneAndDelete","deleted","deleteOne","_id","deletedCount","editVtuber","updated","updateOne","modifiedCount"],"sources":["../../source/resolvers/vtuber.resolver.js"],"sourcesContent":["import { isValidObjectId } from \"mongoose\";\nimport connectDB from \"../database\";\nimport VTuber from \"../models/VTuber\";\nimport Hashtag from \"../models/Hashtag\";\nimport Cover from \"../models/Cover\";\n\nexport const vtuber_resolver = {\n\tQuery: {\n\t\tasync vtuber() {\n\t\t\tawait connectDB();\n\t\t\tconst data = await VTuber.find()\n\t\t\t\t.populate(\"hashtag\")\n\t\t\t\t.populate(\"socialNetworks\")\n\t\t\t\t.populate(\"songs\")\n\t\t\t\t.populate({\n\t\t\t\t\tpath: \"covers\",\n\t\t\t\t\tmodel: Cover,\n\t\t\t\t\tselect: \"_id name musicVideo illustration mix\",\n\t\t\t\t\tpopulate: { path: \"original\", select: \"-_id artist album release genre\" },\n\t\t\t\t});\n\t\t\treturn data;\n\t\t},\n\t\tgetVtuber: async (_, { ID }) => {\n\t\t\tawait connectDB();\n\t\t\tif (!isValidObjectId(ID)) {\n\t\t\t\tthrow new Error(\"Invalid VTuber ID\");\n\t\t\t}\n\t\t\tconst vtuber = await VTuber.findById(ID)\n\t\t\t\t.populate(\"hashtag\")\n\t\t\t\t.populate(\"socialNetworks\")\n\t\t\t\t.populate(\"songs\")\n\t\t\t\t.populate({\n\t\t\t\t\tpath: \"covers\",\n\t\t\t\t\tmodel: Cover,\n\t\t\t\t\tselect: \"_id name musicVideo illustration mix\",\n\t\t\t\t\tpopulate: { path: \"original\", select: \"-_id artist album release genre\" },\n\t\t\t\t});\n\t\t\tif (!vtuber) {\n\t\t\t\tthrow new Error(\"VTuber Not Found\");\n\t\t\t}\n\t\t\treturn vtuber;\n\t\t},\n\t},\n\tMutation: {\n\t\tasync addVtuber(\n\t\t\t_,\n\t\t\t{\n\t\t\t\tfullname,\n\t\t\t\tfanname,\n\t\t\t\tquote,\n\t\t\t\tbranch,\n\t\t\t\tunit,\n\t\t\t\temoji,\n\t\t\t\tnicknames,\n\t\t\t\tyoutube,\n\t\t\t\tstatus,\n\t\t\t\tavatar,\n\t\t\t\tgender,\n\t\t\t\tlikes,\n\t\t\t\tdislikes,\n\t\t\t\tage,\n\t\t\t\tbirthday,\n\t\t\t\tzodiac,\n\t\t\t\theight,\n\t\t\t},\n\t\t) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tconst new_vtuber = new VTuber({\n\t\t\t\tfullname,\n\t\t\t\tfanname,\n\t\t\t\tquote,\n\t\t\t\tnicknames,\n\t\t\t\tbranch,\n\t\t\t\tunit,\n\t\t\t\temoji,\n\t\t\t\tyoutube,\n\t\t\t\tstatus,\n\t\t\t\tavatar,\n\t\t\t\tgender,\n\t\t\t\tlikes,\n\t\t\t\tdislikes,\n\t\t\t\tage,\n\t\t\t\tbirthday,\n\t\t\t\tzodiac,\n\t\t\t\theight,\n\t\t\t});\n\t\t\tconst vtuber = await new_vtuber.save();\n\t\t\treturn vtuber;\n\t\t},\n\t\tasync deleteVtuber(_, { ID }) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tif (!isValidObjectId(ID)) throw new Error(\"Invalid VTuber ID\");\n\t\t\tawait Hashtag.findOneAndDelete({ vtuber: ID });\n\t\t\tconst deleted = (await VTuber.deleteOne({ _id: ID })).deletedCount;\n\t\t\tif (!deleted) throw new Error(\"VTuber Not Found\");\n\t\t\treturn deleted;\n\t\t},\n\t\tasync editVtuber(\n\t\t\t_,\n\t\t\t{\n\t\t\t\tID,\n\t\t\t\tfullname,\n\t\t\t\tfanname,\n\t\t\t\tquote,\n\t\t\t\tnicknames,\n\t\t\t\tbranch,\n\t\t\t\tunit,\n\t\t\t\temoji,\n\t\t\t\tyoutube,\n\t\t\t\tstatus,\n\t\t\t\tavatar,\n\t\t\t\tgender,\n\t\t\t\tlikes,\n\t\t\t\tdislikes,\n\t\t\t\tage,\n\t\t\t\tbirthday,\n\t\t\t\tzodiac,\n\t\t\t\theight,\n\t\t\t},\n\t\t) {\n\t\t\tawait connectDB();\n\t\t\tif (process.env.NODE_ENV === \"production\") {\n\t\t\t\tthrow new Error(\"Mutation actions are only available in development mode\");\n\t\t\t}\n\t\t\tif (!isValidObjectId(ID)) throw new Error(\"Invalid VTuber ID\");\n\t\t\tconst updated = (\n\t\t\t\tawait VTuber.updateOne(\n\t\t\t\t\t{ _id: ID },\n\t\t\t\t\t{\n\t\t\t\t\t\tfullname,\n\t\t\t\t\t\tfanname,\n\t\t\t\t\t\tquote,\n\t\t\t\t\t\tnicknames,\n\t\t\t\t\t\tbranch,\n\t\t\t\t\t\tunit,\n\t\t\t\t\t\temoji,\n\t\t\t\t\t\tyoutube,\n\t\t\t\t\t\tgender,\n\t\t\t\t\t\tavatar,\n\t\t\t\t\t\tlikes,\n\t\t\t\t\t\tdislikes,\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\tage,\n\t\t\t\t\t\tbirthday,\n\t\t\t\t\t\tzodiac,\n\t\t\t\t\t\theight,\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t).modifiedCount;\n\t\t\tif (!updated) throw new Error(\"VTuber Not Found\");\n\t\t\treturn updated;\n\t\t},\n\t},\n};\n"],"mappings":"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","ignoreList":[]}